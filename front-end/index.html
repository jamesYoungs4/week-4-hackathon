<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diary</title>
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <header>
      <h1>ðŸ“’ My Diary</h1>
      <a href="new.html">New Entry</a>
    </header>

    <main id="entries">
    </main>

    <script>
      async function loadEntries() {
        const response = await fetch("http://localhost:4000/api/entries");
        const entries = await response.json();

        const container = document.getElementById("entries");
        container.innerHTML = ""; 

        entries.forEach((entry) => {
          const div = document.createElement("div");
          div.className = "entry";

          div.innerHTML = `
        <p><strong>${entry.category}</strong></p>
        <p>${new Date(entry.entry_datetime).toLocaleDateString()}</p>   
        <p>${entry.text.substring(0, 80)}...</p> 
        <a href="entry.html?id=${entry.id}">Read more</a>
      `;

          container.appendChild(div);
        });
      }

      loadEntries();
    </script>
  </body>
</html>
